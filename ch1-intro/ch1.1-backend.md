# 1.1 背景

云计算从开始的物理机逐步发展到虚拟机和容器，目前云原生是云计算发展的新阶段。在云原生的变革过程中，软件的架构和使用的方式并没有大的变化。但是云原生时代容器和微服务的流行带来了服务数量级的增长，这对软件的开发、部署和运维模式都带来了新的挑战。

当后台系统从单机架构演变到基于 Kubernetes 平台的微服务架构，天然具备了平台提供的极致的弹性伸缩、故障的恢复等能力。但是定位是基础平台的 Kubernetes 主要实现了容器的调度和编排的能力，而对于企业用户的容器的监控、运维，包括 CI/CD 等定制性需求并没有提供原生的支持。虽然 Kubernetes 提供了灵活的扩展能力，但是不同企业不同的研发能力和投入差异，都为云原生的落地带来了各种挑战。

开源社区通过 kustomize、velocity 等技术组合临时缓解了 Kubernetes 平台的 Yaml 文件爆炸的问题，同时结合 GitOps 和代码评审等手段进一步提升了代码和工程质量，为云原生的运维发展方向提供了很好的实践参考。相比经典运维中台，目前这类技术手段的好处清晰明确，往往可以比较简单的搭建起来，不强依赖产品研发资源投入，但其工程视角缺点也非常明显。首先 Kubernetes API 的设计较为复杂，仅是 Kubernetes 原生提供的 low level API 就暴露了 500 多种模型，2000 多字段，场景上几乎涵盖了基础设施应用层的方方面面，即使是专业同学也很难理解所有细节。其次这种方式的工程化程度很低，违反 DRY 原则，违反各团队职责能力高内聚低耦合的原则。同时由于团队边界造成的多个割裂的平台，用户需在多个平台间切换，每个平台的操作方式各异，加上跳板机黑屏命令，都为运维的效率造成了很大影响。

以国内的蚂蚁集团为例：蚂蚁基础技术在过去几年通过 mesh 等技术手段将通用技术下层到基础平台，同时通过为集中式、标准化、低变更频率的应用提供统一的运维中台充分的拥抱了云原生技术，并获取了其带来的技术红利。随着云原生基础服务和标准化应用逐渐稳定后，对于非标准应用等个性化的需求的运维支持成了云原生落地所面临的主要矛盾。在典型案例中一个多应用的 infra 项目仍然维护了多达 5 万多行 YAML，即使在有一定的工具支持的情况下，完成一次完整的发布需要 2 天时间。如何结合 Kubernetes 生态的开放、可配置的特点，以自动的方式支持部署和运维非标应用是当前亟需解决的问题。

根据康威定律，一个良好的软件系统架构一定是反映了背后的组织架构运转模式。因此云原生落地中的各种困难其实是反映了背后经典运维手段不能适应微服务结构变化的问题。我们不能再以传统的过程式思维来运维海量的云原生应用，需要充分利用声明式思维方式描述系统终态，然后通过 Kubernetes 平台、终态的决策引擎和自定义的 operator 自动向描述的系统终态逼近。可以用一个家庭智能温控的例子做类比：我们只需要声明需要一个舒适的温度（声明一个终态），然后家庭智能系统（终态的决策引擎）据不同温度传感器的反馈决定向空调发出具体操作（自定义的 operator），当室内温度被外界因素干扰时家庭智能系统会自动即使调控到舒适的温度这个终态。SRE 也可以通过声明式描述系统终态、配合自动化终态调和引擎实现云原生规模化运维工作。

声明式描述终态是第一步，Kusion 项目尝试通过面相云原生运维场景定制的 KCL 声明式的配置语言、通用的基础模型 Konfig 库、KusionCtl 引擎和工具、再结合 IDE 插件来实现高效的 GieOps 代码化方式运维云原生的基础设施和应用。同时我们希望通过将 Kusion 完全开源的方式来为云原生的快速落地贡献绵薄之力。
